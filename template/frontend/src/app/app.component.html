<div class="app-container">
  <mat-sidenav-container>
    <!-- Sidenav para dispositivos móveis -->
    <mat-sidenav #sidenav mode="over" class="mobile-sidenav">
      <div class="sidenav-header">
        <h3>Menu</h3>
        <button mat-icon-button (click)="sidenav.close()" aria-label="Close menu">
          <mat-icon>close</mat-icon>
        </button>
      </div>
      
      <!-- Links para usuários autenticados -->
      <div class="sidenav-content" *ngIf="isAuthenticated">
        <a mat-button routerLink="/products" (click)="sidenav.close()">
          <mat-icon>store</mat-icon> Products
        </a>
        <a mat-button routerLink="/cart" (click)="sidenav.close()">
          <mat-icon>shopping_cart</mat-icon> Cart
        </a>
        <a mat-button routerLink="/cart/orders" (click)="sidenav.close()">
          <mat-icon>receipt_long</mat-icon> My Orders
        </a>
        <button mat-button (click)="logout(); sidenav.close()">
          <mat-icon>logout</mat-icon> Logout
        </button>
        <div class="user-display" *ngIf="currentUser">
          <mat-icon>person</mat-icon> {{ currentUser.name }}
        </div>
      </div>
      
      <!-- Links para usuários não autenticados -->
      <div class="sidenav-content" *ngIf="!isAuthenticated">
        <a mat-button routerLink="/auth/login" (click)="sidenav.close()">
          <mat-icon>login</mat-icon> Login
        </a>
        <a mat-button routerLink="/auth/register" (click)="sidenav.close()">
          <mat-icon>person_add</mat-icon> Register
        </a>
      </div>
    </mat-sidenav>
    
    <mat-sidenav-content>
      <!-- Header/Navbar -->
      <header class="app-header">
        <mat-toolbar color="primary">
          <div class="container">
            <button mat-icon-button class="menu-button" aria-label="Menu" (click)="sidenav.open()">
              <mat-icon>menu</mat-icon>
            </button>
            <a routerLink="/" class="brand-link">
              <span class="brand-name">Angular Store</span>
            </a>
            <span class="spacer"></span>
            
            <!-- Links para usuários autenticados -->
            <div class="nav-actions" *ngIf="isAuthenticated">
              <a mat-button routerLink="/products">Products</a>
              <a mat-button routerLink="/cart">
                <mat-icon>shopping_cart</mat-icon> Cart
              </a>
              <a mat-button routerLink="/cart/orders">
                <mat-icon>receipt_long</mat-icon> My Orders
              </a>
              <button mat-button (click)="logout()">
                <mat-icon>logout</mat-icon> Logout
              </button>
              <span class="user-display" *ngIf="currentUser">
                <mat-icon>person</mat-icon> {{ currentUser.name }}
              </span>
            </div>
            
            <!-- Links para usuários não autenticados -->
            <div class="nav-actions" *ngIf="!isAuthenticated">
              <a mat-button routerLink="/auth/login">
                <mat-icon>login</mat-icon> Login
              </a>
              <a mat-button routerLink="/auth/register">
                <mat-icon>person_add</mat-icon> Register
              </a>
            </div>
          </div>
        </mat-toolbar>
      </header>

      <!-- Main Content Area -->
      <main class="app-content">
        <router-outlet></router-outlet>
      </main>

      <!-- Footer -->
      <footer class="app-footer">
        <div class="container">
          <p>&copy; 2023 Angular Store. All rights reserved.</p>
        </div>
      </footer>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>